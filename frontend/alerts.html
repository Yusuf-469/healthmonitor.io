<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alerts - HealthMonitor</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/pages.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
</head>
<body class="dashboard-body">
    <div class="dashboard-layout">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <a href="dashboard.html" class="logo">
                    <i class="fas fa-heartbeat heartbeat-icon"></i>
                    <span class="logo-text">HealthMonitor</span>
                </a>
            </div>
            
            <nav class="sidebar-nav">
                <div class="nav-section">
                    <span class="nav-section-title">Main</span>
                    <a href="dashboard.html" class="nav-item">
                        <i class="fas fa-tachometer-alt"></i>
                        <span>Dashboard</span>
                    </a>
                    <a href="patients.html" class="nav-item">
                        <i class="fas fa-users"></i>
                        <span>Patients</span>
                    </a>
                    <a href="devices.html" class="nav-item">
                        <i class="fas fa-microchip"></i>
                        <span>Devices</span>
                    </a>
                </div>
                
                <div class="nav-section">
                    <span class="nav-section-title">Monitoring</span>
                    <a href="alerts.html" class="nav-item active">
                        <i class="fas fa-bell"></i>
                        <span>Alerts</span>
                        <span class="badge alert-badge">3</span>
                    </a>
                    <a href="analytics.html" class="nav-item">
                        <i class="fas fa-chart-line"></i>
                        <span>Analytics</span>
                    </a>
                </div>
                
                <div class="nav-section">
                    <span class="nav-section-title">System</span>
                    <a href="settings.html" class="nav-item">
                        <i class="fas fa-cog"></i>
                        <span>Settings</span>
                    </a>
                </div>
            </nav>
            
            <div class="sidebar-footer">
                <button class="logout-btn" onclick="logout()">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </button>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="main-content">
            <header class="content-header">
                <div class="header-left">
                    <button class="sidebar-toggle" id="sidebar-toggle">
                        <i class="fas fa-bars"></i>
                    </button>
                    <div class="page-title">
                        <h1>Alerts</h1>
                    </div>
                </div>
                
                <div class="header-right">
                    <button class="btn btn-secondary" onclick="markAllRead()">
                        <i class="fas fa-check-double"></i> Mark All Read
                    </button>
                </div>
            </header>

            <div class="dashboard-content">
                <!-- Alert Stats -->
                <section class="stats-section reveal-scroll">
                    <div class="stat-card">
                        <div class="stat-icon alerts">
                            <i class="fas fa-exclamation-circle"></i>
                        </div>
                        <div class="stat-details">
                            <span class="stat-number">5</span>
                            <span class="stat-label">Total Alerts</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(239, 68, 68, 0.1); color: #ef4444;">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        <div class="stat-details">
                            <span class="stat-number">2</span>
                            <span class="stat-label">Critical</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(245, 158, 11, 0.1); color: #f59e0b;">
                            <i class="fas fa-exclamation"></i>
                        </div>
                        <div class="stat-details">
                            <span class="stat-number">2</span>
                            <span class="stat-label">Warnings</span>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon" style="background: rgba(59, 130, 246, 0.1); color: #3b82f6;">
                            <i class="fas fa-info-circle"></i>
                        </div>
                        <div class="stat-details">
                            <span class="stat-number">1</span>
                            <span class="stat-label">Info</span>
                        </div>
                    </div>
                </section>

                <!-- Alerts List -->
                <section class="alerts-full-section reveal-scroll">
                    <div class="section-header">
                        <h3><i class="fas fa-list"></i> All Alerts</h3>
                        <div class="filter-tabs">
                            <button class="filter-tab active" data-filter="all">All</button>
                            <button class="filter-tab" data-filter="critical">Critical</button>
                            <button class="filter-tab" data-filter="warning">Warning</button>
                            <button class="filter-tab" data-filter="info">Info</button>
                        </div>
                    </div>
                    
                    <div class="alerts-full-list" id="alerts-list">
                        <!-- Populated by JS -->
                    </div>
                </section>

                <!-- Alert Chart -->
                <section class="charts-section reveal-scroll">
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3><i class="fas fa-chart-pie"></i> Alert Distribution</h3>
                        </div>
                        <div class="chart-container doughnut-container">
                            <canvas id="alertChart"></canvas>
                            <div class="chart-center-text">
                                <span class="center-value">5</span>
                                <span class="center-label">Total</span>
                            </div>
                        </div>
                    </div>
                    
                    <div class="chart-card">
                        <div class="chart-header">
                            <h3><i class="fas fa-chart-bar"></i> Alerts Over Time</h3>
                        </div>
                        <div class="chart-container">
                            <canvas id="alertsTimeChart"></canvas>
                        </div>
                    </div>
                </section>
            </div>
        </main>
    </div>

    <script src="js/page-scripts.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            loadAlertsPage();
        });

        function loadAlertsPage() {
            const alerts = [
                { id: 1, type: 'critical', title: 'Critical Alert', message: "Patient Niladri's heart rate exceeded 100 BPM", time: '2 minutes ago', patient: 'Niladri' },
                { id: 2, type: 'warning', title: 'Warning', message: 'Device ESP32-004 battery below 20%', time: '15 minutes ago', device: 'ESP32-004' },
                { id: 3, type: 'critical', title: 'Critical Alert', message: 'Patient Kaustav temperature above 38Â°C', time: '30 minutes ago', patient: 'Kaustav' },
                { id: 4, type: 'warning', title: 'Warning', message: 'SpO2 level below 95% for patient Yusuf', time: '45 minutes ago', patient: 'Yusuf' },
                { id: 5, type: 'info', title: 'Device Connected', message: 'New device ESP32-005 is now online', time: '1 hour ago', device: 'ESP32-005' }
            ];

            const list = document.getElementById('alerts-list');
            list.innerHTML = alerts.map(a => `
                <div class="alert-full-item ${a.type}">
                    <div class="alert-icon">
                        <i class="fas ${a.type === 'critical' ? 'fa-exclamation-circle' : a.type === 'warning' ? 'fa-exclamation-triangle' : 'fa-info-circle'}"></i>
                    </div>
                    <div class="alert-content">
                        <h4>${a.title}</h4>
                        <p>${a.message}</p>
                        <span class="alert-meta">
                            ${a.patient ? `<span class="meta-item"><i class="fas fa-user"></i> ${a.patient}</span>` : ''}
                            ${a.device ? `<span class="meta-item"><i class="fas fa-microchip"></i> ${a.device}</span>` : ''}
                            <span class="meta-item"><i class="fas fa-clock"></i> ${a.time}</span>
                        </span>
                    </div>
                    <div class="alert-actions">
                        <button class="action-btn" title="View Details"><i class="fas fa-eye"></i></button>
                        <button class="action-btn" title="Dismiss" onclick="dismissAlert(${a.id})"><i class="fas fa-times"></i></button>
                    </div>
                </div>
            `).join('');

            // Alert distribution chart
            new Chart(document.getElementById('alertChart'), {
                type: 'doughnut',
                data: {
                    labels: ['Critical', 'Warning', 'Info'],
                    datasets: [{
                        data: [2, 2, 1],
                        backgroundColor: ['#ef4444', '#f59e0b', '#3b82f6'],
                        borderWidth: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    cutout: '70%',
                    plugins: { legend: { display: false } }
                }
            });

            // Alerts over time chart
            new Chart(document.getElementById('alertsTimeChart'), {
                type: 'bar',
                data: {
                    labels: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
                    datasets: [{
                        label: 'Alerts',
                        data: [3, 5, 2, 7, 4, 2, 5],
                        backgroundColor: 'rgba(99, 102, 241, 0.8)',
                        borderRadius: 4
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: { legend: { display: false } },
                    scales: {
                        x: { grid: { display: false } },
                        y: { beginAtZero: true }
                    }
                }
            });
        }

        function dismissAlert(id) {
            showToast('Alert dismissed', 'info');
        }

        function markAllRead() {
            showToast('All alerts marked as read', 'success');
        }
    <div class="toast-container" id="toast-container"></div>
    </script>
</body>
</html>
